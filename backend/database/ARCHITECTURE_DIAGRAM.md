# ğŸ—ï¸ Product Collection System - Architecture

## ğŸ“ System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VNBUILDING.VN                              â”‚
â”‚          https://vnbuilding.vn/vat-lieu/alhmabra-rd7ere         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP Request (CURL)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              INTELLIGENT SCRAPER ENGINE                         â”‚
â”‚         (fetch_product_collection.php)                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  DOMDocument â”‚â†’ â”‚   DOMXPath   â”‚â†’ â”‚ Smart Parser â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  Features:                                                      â”‚
â”‚  â€¢ Auto-detect brand & collection name                         â”‚
â”‚  â€¢ Smart field mapping (label â†’ database field)                â”‚
â”‚  â€¢ Catalog PDF detection                                       â”‚
â”‚  â€¢ Product item extraction with specs                          â”‚
â”‚  â€¢ Unique slug generation                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Parsed Data (3 Sections)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA STRUCTURE                               â”‚
â”‚                                                                 â”‚
â”‚  Section 1 & 2: COLLECTION                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â€¢ name: "TIERRA COLLECTION"                      â”‚         â”‚
â”‚  â”‚ â€¢ brand: "Alhambra"                              â”‚         â”‚
â”‚  â”‚ â€¢ supplier_name: "EDSON VIETNAM"                 â”‚         â”‚
â”‚  â”‚ â€¢ supplier_phone: "0979380068"                   â”‚         â”‚
â”‚  â”‚ â€¢ manufacturer_origin: "Spain"                   â”‚         â”‚
â”‚  â”‚ â€¢ website: "alhamabrafabrics.com"                â”‚         â”‚
â”‚  â”‚ â€¢ featured_image, logo_image                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  Section 3: ITEMS (Array)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ [0] name: "PIEDRA 06"                            â”‚         â”‚
â”‚  â”‚     composition: "88% LI 12% CO"                 â”‚         â”‚
â”‚  â”‚     width: "W: 145 cm"                           â”‚         â”‚
â”‚  â”‚     primary_image: "..."                         â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ [1] name: "ORIGEN 06"                            â”‚         â”‚
â”‚  â”‚     composition: "100% SE"                       â”‚         â”‚
â”‚  â”‚     width: "W: 135 cm"                           â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  FILES (Array)                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ [0] file_type: "catalog"                         â”‚         â”‚
â”‚  â”‚     file_url: "https://.../catalogue.pdf"        â”‚         â”‚
â”‚  â”‚     title: "Catalogue"                           â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Save to Database
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MYSQL DATABASE                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   product_collections (Table)       â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ id (PK)                             â”‚                       â”‚
â”‚  â”‚ name, slug, brand                   â”‚                       â”‚
â”‚  â”‚ description, features               â”‚                       â”‚
â”‚  â”‚ supplier_name, supplier_phone       â”‚                       â”‚
â”‚  â”‚ supplier_email, supplier_location   â”‚                       â”‚
â”‚  â”‚ manufacturer, manufacturer_origin   â”‚                       â”‚
â”‚  â”‚ website, featured_image, logo_image â”‚                       â”‚
â”‚  â”‚ category, status, is_featured       â”‚                       â”‚
â”‚  â”‚ created_at, updated_at              â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚ 1:N (One Collection â†’ Many Items)                â”‚
â”‚             â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  product_collection_items (Table)   â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ id (PK)                             â”‚                       â”‚
â”‚  â”‚ collection_id (FK)                  â”‚â—„â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ product_id (FK, optional)           â”‚       â”‚               â”‚
â”‚  â”‚ name, sku, slug                     â”‚       â”‚               â”‚
â”‚  â”‚ collection_name, finish_type        â”‚       â”‚               â”‚
â”‚  â”‚ composition, width, thickness       â”‚       â”‚               â”‚
â”‚  â”‚ specifications (JSON)               â”‚       â”‚               â”‚
â”‚  â”‚ primary_image, display_order        â”‚       â”‚               â”‚
â”‚  â”‚ status, created_at, updated_at      â”‚       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚               â”‚
â”‚                                                 â”‚               â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚ 1:N (One Collection â†’ Many Files)                â”‚
â”‚             â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚     product_files (Table)           â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ id (PK)                             â”‚                       â”‚
â”‚  â”‚ collection_id (FK)                  â”‚â—„â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”‚ product_id (FK, optional)           â”‚                       â”‚
â”‚  â”‚ file_type (catalog/technical_sheet) â”‚                       â”‚
â”‚  â”‚ file_name, file_url, file_size      â”‚                       â”‚
â”‚  â”‚ title, description, language        â”‚                       â”‚
â”‚  â”‚ download_count, status              â”‚                       â”‚
â”‚  â”‚ created_at, updated_at              â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   VIEWS (for easy querying)         â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ â€¢ v_collections_full                â”‚                       â”‚
â”‚  â”‚   â†’ JOIN with suppliers table       â”‚                       â”‚
â”‚  â”‚   â†’ COUNT items & files             â”‚                       â”‚
â”‚  â”‚                                     â”‚                       â”‚
â”‚  â”‚ â€¢ v_collection_items_full           â”‚                       â”‚
â”‚  â”‚   â†’ JOIN with collections           â”‚                       â”‚
â”‚  â”‚   â†’ JOIN with products (optional)   â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Query & Display
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FRONTEND DISPLAY                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚          Collection Detail Page               â”‚             â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚             â”‚
â”‚  â”‚  â”‚  Brand Logo  â”‚  Alhambra                   â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  TIERRA COLLECTION          â”‚             â”‚
â”‚  â”‚                                                â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚
â”‚  â”‚  â”‚ Description: Bá»™ sÆ°u táº­p Tierra khÃ´ng... â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ Material: Váº£i bá»c, má»ng, gá»‘i, ná»‡m       â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ Origin: Spain (1977)                    â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ Website: alhamabrafabrics.com           â”‚  â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚  â”‚                                                â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“„ Download Catalogue (PDF)             â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“„ Technical Data Sheet (TDS)           â”‚  â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚  â”‚                                                â”‚             â”‚
â”‚  â”‚  Product Items:                                â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚             â”‚
â”‚  â”‚  â”‚PIEDRA  â”‚ â”‚ORIGEN  â”‚ â”‚ORIGEN  â”‚            â”‚             â”‚
â”‚  â”‚  â”‚  06    â”‚ â”‚  06    â”‚ â”‚  01    â”‚            â”‚             â”‚
â”‚  â”‚  â”‚        â”‚ â”‚        â”‚ â”‚        â”‚            â”‚             â”‚
â”‚  â”‚  â”‚88% LI  â”‚ â”‚100% SE â”‚ â”‚100% SE â”‚            â”‚             â”‚
â”‚  â”‚  â”‚W:145cm â”‚ â”‚W:135cm â”‚ â”‚W:135cm â”‚            â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚             â”‚
â”‚  â”‚                                                â”‚             â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚
â”‚  â”‚  â”‚ NhÃ  cung cáº¥p táº¡i Viá»‡t Nam:              â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ CÃ”NG TY TNHH... EDSON (VIá»†T NAM)        â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“ 0979380068                            â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ âœ‰ï¸ info@homekhangroup.com                â”‚  â”‚             â”‚
â”‚  â”‚  â”‚ ğŸ“ Há»“ ChÃ­ Minh                           â”‚  â”‚             â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Sequence

```
1. USER INPUT
   â†“
   URL: https://vnbuilding.vn/vat-lieu/alhmabra-rd7ere

2. SCRAPER (fetch_product_collection.php)
   â†“
   â†’ CURL Request â†’ Get HTML
   â†’ DOMDocument â†’ Parse HTML
   â†’ DOMXPath â†’ Extract Data
   â†“
   Result: Array [collection, items, files]

3. PREVIEW
   â†“
   â†’ Display in Browser
   â†’ User Reviews Data
   â†’ Click "Save to Database"

4. DATABASE SAVE (Transaction)
   â†“
   BEGIN TRANSACTION
   â”œâ”€ INSERT/UPDATE product_collections     (1 record)
   â”œâ”€ INSERT product_collection_items       (N records)
   â”œâ”€ INSERT product_files                  (M records)
   COMMIT
   â†“
   Return: {success: true, collection_id: X, items_added: N, files_added: M}

5. FRONTEND QUERY
   â†“
   SELECT * FROM v_collections_full WHERE brand = 'Alhambra'
   â†“
   Display Collection Page with Items & Files
```

---

## ğŸ¯ Entity Relationship Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   suppliers     â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)         â”‚
                    â”‚ name            â”‚
                    â”‚ phone           â”‚
                    â”‚ email           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ 1:N (Optional)
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚product_collections  â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ id (PK)             â”‚
                    â”‚ name, slug, brand   â”‚
                    â”‚ supplier_id (FK)    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ description         â”‚         â”‚
                    â”‚ supplier_name       â”‚         â”‚
                    â”‚ supplier_phone      â”‚         â”‚
                    â”‚ featured_image      â”‚         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                               â”‚                     â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
                â”‚                             â”‚     â”‚
                â”‚ 1:N                         â”‚ 1:N â”‚
                â”‚                             â”‚     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚product_collection_    â”‚    â”‚   product_files       â”‚
     â”‚items                  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚ id (PK)               â”‚
     â”‚ id (PK)               â”‚    â”‚ collection_id (FK) â”€â”€â”€â”˜
     â”‚ collection_id (FK) â”€â”€â”€â”˜    â”‚ product_id (FK)
     â”‚ product_id (FK)            â”‚ file_type
     â”‚ name, sku, slug            â”‚ file_url
     â”‚ specifications (JSON)      â”‚ title
     â”‚ primary_image              â”‚ download_count
     â”‚ display_order              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ N:1 (Optional - for linking)
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   products      â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ id (PK)         â”‚
        â”‚ name, slug      â”‚
        â”‚ collection_id   â”‚ (New field added by migration)
        â”‚ supplier_id     â”‚
        â”‚ price           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Table Relationships

| Parent Table | Child Table | Relationship | Cascade |
|--------------|-------------|--------------|---------|
| `suppliers` | `product_collections` | 1:N (Optional) | SET NULL |
| `product_collections` | `product_collection_items` | 1:N | CASCADE |
| `product_collections` | `product_files` | 1:N | CASCADE |
| `products` | `product_collection_items` | 1:N (Optional) | SET NULL |
| `products` | `product_files` | 1:N (Optional) | CASCADE |

---

## ğŸ¨ Color Legend (for diagrams)

- ğŸŸ¦ **Blue**: Input/Output
- ğŸŸ© **Green**: Processing/Logic
- ğŸŸ¨ **Yellow**: Database Tables
- ğŸŸ§ **Orange**: Views/Reports
- ğŸŸ¥ **Red**: External Services

---

Created: 2025-12-10  
Version: 1.0  
Purpose: Visual documentation of the Product Collection Scraper system
